# Redis
## 1.什么是Redis?

Redis是由意大利人Salvatore Sanfilippo（网名：antirez）开发的一款内存高速缓存数据库。Redis全称为：Remote Dictionary Server（远程数据服务），该软件使用C语言编写，Redis是一个key-value存储系统，它支持丰富的数据类型，如：string、list、set、zset(sorted set)、hash。

### 2. Redis特点

Redis以内存作为数据存储介质，所以读写数据的效率极高，远远超过数据库。以设置和获取一个256字节字符串为例，它的读取速度可高达110000次/s，写速度高达81000次/s。

Redis跟memcache不同的是，储存在Redis中的数据是持久化的，断电或重启后，数据也不会丢失。因为Redis的存储分为内存存储、磁盘存储和log文件三部分，重启后，Redis可以从磁盘重新将数据加载到内存中，这些可以通过配置文件对其进行配置，正因为这样，Redis才能实现持久化。

Redis支持主从模式，可以配置集群，这样更利于支撑起大型的项目，这也是Redis的一大亮点。

### 3. Redis应用场景，它能做什么

众多语言都支持Redis，因为Redis交换数据快，所以在服务器中常用来存储一些需要频繁调取的数据，这样可以大大节省系统直接读取磁盘来获得数据的I/O开销，更重要的是可以极大提升速度。

拿大型网站来举个例子，比如a网站首页一天有100万人访问，其中有一个板块为推荐新闻。要是直接从数据库查询，那么一天就要多消耗100万次数据库请求。上面已经说过，Redis支持丰富的数据类型，所以这完全可以用Redis来完成，将这种热点数据存到Redis（内存）中，要用的时候，直接从内存取，极大的提高了速度和节约了服务器的开销。

## 2.缓存穿透、缓存雪崩
### 缓存穿透

缓存穿透指的是用户访问某个热点资源时，没有命中redis缓存，于是到数据库获取数据，数据库也查询不到数据（例如查询id为0或负数等不存在的数据），所以这个请求的数据不会被放到缓存中，后续用户一直请求这个数据，请求一直连接数据库查询，造成数据库压力过大。

解决方法1：

无论在数据库有没有查到数据，都在redis缓存一份，比如当热点数据查询不到时，将空值也放入redis。

解决方法2：

使用布隆过滤器，过滤参数不符合规则的请求。

### 缓存雪崩

当缓存中一批热点数据过期时，此时大量用户访问热点数据，因为缓存已经过期，所以请求将直接通过数据库查询，造成数据库压力过大。

解决方法1：

保证热点数据不会过期，每次访问热点数据时刷新或累加热点数据的有效时间。

解决方法2：

手动将即将缓存起来的热点数据缓存进redis。

